USE [master]
GO
/*Create database*/

CREATE DATABASE [HRAS_RAD]
 CONTAINMENT = NONE
 GO
begin
EXEC [HRAS_RAD].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
/* COMMENT OUT BELOW IF USER CREATION PERMISSION IS NOT GRANTED */
/* create User If possible */
--create a login
USE [master];
GO
CREATE LOGIN teamRADGSHAUser
    WITH PASSWORD    = '123';
GO
--optional code to set login to dbcreator
--EXEC sp_addsrvrolemember 
--	@loginame = N'teamRADGSHAUser', 
--	@rolename = N'dbcreator';

USE [HRAS_RAD]
--create user
CREATE USER [teamRADGSHAUser] FOR LOGIN [teamRADGSHAUser]

--update roles
EXEC sys.sp_addrolemember
	@rolename = 'db_datareader',
	@membername = 'teamRADGSHAUser'
EXEC sys.sp_addrolemember
	@rolename = 'db_datawriter',
	@membername = 'teamRADGSHAUser'
EXEC sys.sp_addrolemember
	@rolename = 'db_owner',
	@membername = 'teamRADGSHAUser'
GO
/* COMMENT OUT ABOVE IF USER CREATION PERMISSION IS NOT GRANTED */


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Inventory](
	[StockId] [nvarchar](50) NOT NULL,
	[Description] [nvarchar](300) NULL,
	[Cost] [money] NULL,
 CONSTRAINT [PK_Inventory] PRIMARY KEY CLUSTERED 
(
	[StockId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Item](
	[StockId] [nvarchar](50) NOT NULL,
	[Size] [int] NULL,
	[Quantity] [int] NULL,
 CONSTRAINT [PK_Item] PRIMARY KEY CLUSTERED 
(
	[StockId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Log](
	[StockId] [nvarchar](50) NOT NULL,
	[UserName] [nvarchar](50) NOT NULL,
	[Date] [datetime] NOT NULL,
	[QuantityUsed] [decimal](14, 1) NULL,
 CONSTRAINT [PK_Log] PRIMARY KEY CLUSTERED 
(
	[StockId] ASC,
	[UserName] ASC,
	[Date] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Patient](
	[Gender] [nvarchar](1) NULL,
	[SSN] [nvarchar](9) NOT NULL,
	[BirthDate] [datetime] NULL,
	[FirstName] [nvarchar](50) NULL,
	[MiddleInitial] [nvarchar](1) NULL,
	[LastName] [nvarchar](50) NULL,
	[AddressLine1] [nvarchar](50) NULL,
	[AddressLine2] [nvarchar](50) NULL,
	[State] [nvarchar](2) NULL,
	[City] [nvarchar](50) NULL,
	[Zipcode] [nchar](10) NULL,
	[InsurerId] [nvarchar](50) NULL,
	[DoNotResuscitate] [bit] NULL,
	[OrganDonor] [bit] NULL,
 CONSTRAINT [PK_Patient] PRIMARY KEY CLUSTERED 
(
	[SSN] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Room](
	[HourlyRate] [decimal](5, 2) NULL,
	[EffectiveDate] [datetime] NOT NULL,
	[RoomNumber] [nvarchar](10) NOT NULL,
 CONSTRAINT [PK_Room_1] PRIMARY KEY CLUSTERED 
(
	[EffectiveDate] ASC,
	[RoomNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Service](
	[StockId] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Service] PRIMARY KEY CLUSTERED 
(
	[StockId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[StaysIn](
	[RoomNumber] [nvarchar](10) NOT NULL,
	[RoomEffectiveDate] [datetime] NOT NULL,
	[PatientId] [nvarchar](9) NOT NULL,
	[VisitEntryDate] [datetime] NOT NULL,
	[RoomEntryDateTime] [datetime] NULL,
	[RoomExitDateTime] [datetime] NULL,
 CONSTRAINT [PK_StaysIn] PRIMARY KEY CLUSTERED 
(
	[RoomNumber] ASC,
	[RoomEffectiveDate] ASC,
	[PatientId] ASC,
	[VisitEntryDate] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Symptom](
	[PatientId] [nvarchar](9) NOT NULL,
	[EntryDate] [datetime] NOT NULL,
	[SymptomName] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Symptom] PRIMARY KEY CLUSTERED 
(
	[PatientId] ASC,
	[EntryDate] ASC,
	[SymptomName] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[User](
	[Username] [nvarchar](50) NOT NULL,
	[Password] [nvarchar](50) NOT NULL,
	[UserType] [bit] NOT NULL,
 CONSTRAINT [PK_User] PRIMARY KEY CLUSTERED 
(
	[Username] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Uses](
	[StockId] [nvarchar](50) NOT NULL,
	[PatientId] [nvarchar](9) NOT NULL,
	[EntryDateTime] [datetime] NOT NULL,
 CONSTRAINT [PK_Uses] PRIMARY KEY CLUSTERED 
(
	[StockId] ASC,
	[PatientId] ASC,
	[EntryDateTime] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Visit](
	[PatientId] [nvarchar](9) NOT NULL,
	[EntryDate] [datetime] NOT NULL,
	[ExitDate] [datetime] NULL,
	[AttendingPhysician] [nvarchar](50) NULL,
	[Diagnosis] [nvarchar](50) NULL,
 CONSTRAINT [PK_Visit] PRIMARY KEY CLUSTERED 
(
	[PatientId] ASC,
	[EntryDate] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Item]  WITH CHECK ADD  CONSTRAINT [FK_Item_Inventory] FOREIGN KEY([StockId])
REFERENCES [dbo].[Inventory] ([StockId])
GO
ALTER TABLE [dbo].[Item] CHECK CONSTRAINT [FK_Item_Inventory]
GO
ALTER TABLE [dbo].[Log]  WITH CHECK ADD  CONSTRAINT [FK_Log_Inventory] FOREIGN KEY([StockId])
REFERENCES [dbo].[Inventory] ([StockId])
GO
ALTER TABLE [dbo].[Log] CHECK CONSTRAINT [FK_Log_Inventory]
GO
ALTER TABLE [dbo].[Log]  WITH CHECK ADD  CONSTRAINT [FK_Log_User] FOREIGN KEY([UserName])
REFERENCES [dbo].[User] ([Username])
GO
ALTER TABLE [dbo].[Log] CHECK CONSTRAINT [FK_Log_User]
GO
ALTER TABLE [dbo].[Service]  WITH CHECK ADD  CONSTRAINT [FK_Service_Inventory] FOREIGN KEY([StockId])
REFERENCES [dbo].[Inventory] ([StockId])
GO
ALTER TABLE [dbo].[Service] CHECK CONSTRAINT [FK_Service_Inventory]
GO
ALTER TABLE [dbo].[StaysIn]  WITH CHECK ADD  CONSTRAINT [FK_StaysIn_Patient] FOREIGN KEY([PatientId])
REFERENCES [dbo].[Patient] ([SSN])
GO
ALTER TABLE [dbo].[StaysIn] CHECK CONSTRAINT [FK_StaysIn_Patient]
GO
ALTER TABLE [dbo].[StaysIn]  WITH CHECK ADD  CONSTRAINT [FK_StaysIn_Room] FOREIGN KEY([RoomEffectiveDate], [RoomNumber])
REFERENCES [dbo].[Room] ([EffectiveDate], [RoomNumber])
GO
ALTER TABLE [dbo].[StaysIn] CHECK CONSTRAINT [FK_StaysIn_Room]
GO
ALTER TABLE [dbo].[Symptom]  WITH CHECK ADD  CONSTRAINT [FK_Symptom_Visit] FOREIGN KEY([PatientId], [EntryDate])
REFERENCES [dbo].[Visit] ([PatientId], [EntryDate])
GO
ALTER TABLE [dbo].[Symptom] CHECK CONSTRAINT [FK_Symptom_Visit]
GO
ALTER TABLE [dbo].[Uses]  WITH CHECK ADD  CONSTRAINT [FK_Uses_Inventory] FOREIGN KEY([StockId])
REFERENCES [dbo].[Inventory] ([StockId])
GO
ALTER TABLE [dbo].[Uses] CHECK CONSTRAINT [FK_Uses_Inventory]
GO
ALTER TABLE [dbo].[Uses]  WITH CHECK ADD  CONSTRAINT [FK_Uses_Visit] FOREIGN KEY([PatientId], [EntryDateTime])
REFERENCES [dbo].[Visit] ([PatientId], [EntryDate])
GO
ALTER TABLE [dbo].[Uses] CHECK CONSTRAINT [FK_Uses_Visit]
GO
USE [master]
GO
ALTER DATABASE [HRAS_RAD] SET  READ_WRITE 
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO


USE [HRAS_RAD]
GO
-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/28/2019
-- Description:	takes variables and inserts them into the Patient table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addPatient

	-- Add the parameters for the stored procedure here
	@gender nvarchar(1), @ssn nvarchar(50), 
	@birthDate datetime, @firstName nvarchar(50), 
	@middleInitial nvarchar(1), @lastName nvarchar(50), 
	@addressLine1 nvarchar(50), @addressLine2 nvarchar(50), 
	@state nvarchar(2), @city nvarchar(50), 
	@zipcode nchar(10), @insurerId nvarchar(50), 
	@doNotResuscitate bit, @organDonor bit
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO Patient (Gender, SSN, BirthDate, FirstName, MiddleInitial, LastName, AddressLine1, 
	AddressLine2, State, City, Zipcode, InsurerId, DoNotResuscitate, OrganDonor) VALUES (@gender, @ssn, 
	@birthDate, @firstName,
	@middleInitial, @lastName,
	@addressLine1, @addressLine2,
	@state, @city,
	@zipcode, @insurerId,
	@doNotResuscitate, @organDonor)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/28/2019
-- Description:	takes 3 variables and stores them into the Room table
-- =============================================
CREATE OR ALTER PROCEDURE addRoom
	-- Add the parameters for the stored procedure here
	@hourlyRate decimal(5,2), @effectiveDate datetime,
	@roomNumber nvarchar(10)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO Room (HourlyRate, EffectiveDate, RoomNumber) VALUES (@hourlyRate, @effectiveDate, @roomNumber)

END
GO


-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/28/2019
-- Description:	takes a ssn variable and returns patients where SSN matches
-- =============================================
CREATE OR ALTER PROCEDURE getPatient
	-- Add the parameters for the stored procedure here
	@ssn nvarchar(9)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	SELECT * FROM Patient WHERE SSN = @ssn

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/28/2019
-- Description:	takes a ssn variable and returns visits where SSN matches
-- =============================================
CREATE OR ALTER PROCEDURE getVisits
	-- Add the parameters for the stored procedure here
	@ssn nvarchar(9)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	SELECT * FROM Visit WHERE PatientId = @ssn

END
GO


-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/28/2019
-- Description:	takes 3 variables and returns patients that begin with the given variables
-- =============================================
CREATE OR ALTER PROCEDURE queryPatient
	-- Add the parameters for the stored procedure here
	@ssn nvarchar(9), @lastName nvarchar(50), 
	@firstName nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	EXEC('SELECT * FROM Patient WHERE SSN LIKE ''' + @ssn + '%'' AND LastName LIKE ''' + @lastName + '%'' AND FirstName LIKE ''' + @firstName +'%''')

END
GO


-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/28/2019
-- Description:	takes in variables and updates them to the patient table with the ssn given
-- =============================================
CREATE OR ALTER PROCEDURE updatePatient

	-- Add the parameters for the stored procedure here
	@gender nvarchar(1), @ssn nvarchar(50), 
	@birthDate datetime, @firstName nvarchar(50), 
	@middleInitial nvarchar(1), @lastName nvarchar(50), 
	@addressLine1 nvarchar(50), @addressLine2 nvarchar(50), 
	@state nvarchar(2), @city nvarchar(50), 
	@zipcode nchar(10), @insurerId nvarchar(50), 
	@doNotResuscitate bit, @organDonor bit
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE Patient SET 
	Gender = @gender, SSN = @ssn, 
	BirthDate = @birthDate, FirstName = @firstName,
	MiddleInitial = @middleInitial, LastName = @lastName, 
	AddressLine1 = @addressLine1,
	AddressLine2 = @addressLine2, 
	state = @state, city = @city, 
	Zipcode = @zipcode, InsurerId = @insurerId,
	DoNotResuscitate = @doNotResuscitate, OrganDonor = @organDonor 
	WHERE SSN = @ssn

END
GO


-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/28/2019
-- Description:	takes a ssn variable and returns visits where SSN matches
-- =============================================
CREATE OR ALTER PROCEDURE getItems
	-- Add the parameters for the stored procedure here
	@table nvarchar(20), @feildName nvarchar(20),
	@query nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	
	EXEC('SELECT * FROM [' + @table + '] WHERE ' + @feildName + ' = ''' + @query + '''')

END
GO


-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/29/2019
-- Description:	takes variables and inserts them into the Item table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addItem

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50), @size int,
	@quantity int
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO Item(StockId, Size, Quantity) VALUES (@stockId, @size, @quantity)

END
GO


-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/29/2019
-- Description:	takes stockId and removes the row from the table
-- =============================================
CREATE OR ALTER PROCEDURE removeItem

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	DELETE FROM Item
	WHERE StockId = @stockId

END
GO


-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/29/2019
-- Description:	takes variables and updates them in the Item table
-- =============================================
CREATE OR ALTER PROCEDURE updateItem

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50), @size int,
	@quantity int
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE Item SET stockId = @stockId, Size = @size, Quantity = @quantity
	WHERE StockId = @stockId

END
GO


-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	verifies login
-- =============================================
CREATE OR ALTER PROCEDURE validateLogin

	-- Add the parameters for the stored procedure here
	@userName nvarchar(50), @givenPW nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	DECLARE @isValid BIT
	IF EXISTS(SELECT * FROM [User] WHERE @username = Username AND @givenPW = Password)	SET @isValid = 1
	ELSE SET @isValid = 0
	SELECT @isValid

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes a variables and inserts them into the Log table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addToLog

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50), @userName nvarchar(50),
	@quantityUsed dec(14,1)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO [Log](StockId, UserName, Date, QuantityUsed) VALUES (@stockId, @userName, CURRENT_TIMESTAMP, @quantityUsed)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes a variables and inserts them into the Inventory table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addInventory

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50), @description nvarchar(300),
	@cost money
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO Inventory(StockId, Description, Cost) VALUES (@stockId, @description, @cost)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/29/2019
-- Description:	takes variables and updates them in the Inventory table
-- =============================================
CREATE OR ALTER PROCEDURE updateInventory

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50), @description nvarchar(300),
	@cost money
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE Inventory SET stockId = @StockId, Description = @description, Cost = @cost
	WHERE StockId = @stockId

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 3/29/2019
-- Description:	takes stockId and removes the row from the table
-- =============================================
CREATE OR ALTER PROCEDURE removeInventory

	-- Add the parameters for the stored procedure here
	@StockId nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	DELETE FROM Inventory
	WHERE StockId = @StockId

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes variables and updates them in the Room table
-- =============================================
CREATE OR ALTER PROCEDURE updateRoom
	-- Add the parameters for the stored procedure here
	@hourlyRate nvarchar(50), @dateTime datetime,
	@roomNumber nvarchar(10)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE Room SET HourlyRate = @hourlyRate, EffectiveDate = @dateTime, RoomNumber = @roomNumber
	WHERE RoomNumber = @roomNumber

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes roomNumber and removes the row from the table
-- =============================================
CREATE OR ALTER PROCEDURE removeRoom

	-- Add the parameters for the stored procedure here
	@roomNumber nvarchar(10)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	DELETE FROM Room
	WHERE RoomNumber = @roomNumber

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes variables and inserts them into the User table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addUser

	-- Add the parameters for the stored procedure here
	@userName nvarchar(50), @password nvarchar(50),
	@userType bit
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO [User](Username, Password, UserType) VALUES (@userName, @password, @userType)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	removes user from User table
-- =============================================
CREATE OR ALTER PROCEDURE removeUser

	-- Add the parameters for the stored procedure here
	@userName nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	DELETE FROM [User]
	WHERE Username = @userName

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	updates password of userGiven from User table
-- =============================================
CREATE OR ALTER PROCEDURE updatePassword

	-- Add the parameters for the stored procedure here
	@userGiven nvarchar(50), @password nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE [User] SET Password = @password WHERE Username = @userGiven

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	verifies login
-- =============================================
CREATE OR ALTER PROCEDURE validateUserType

	-- Add the parameters for the stored procedure here
	@UserName nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	SELECT UserType FROM [User] WHERE @username = Username

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes variables and inserts them into the StaysIn table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addStaysIn

	-- Add the parameters for the stored procedure here
	@roomNumber nvarchar(10), @roomEffectiveDate datetime,
	@patientId nvarchar(9), @visitEntryDate datetime
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	--DECLARE @roomEffectiveDate datetime

	--SET @roomEffectiveDate = (SELECT effectiveDate FROM Room WHERE RoomNumber = @roomNumber)

	INSERT INTO StaysIn(RoomNumber, RoomEffectiveDate, PatientId, VisitEntryDate, RoomEntryDateTime) 
	VALUES (@roomNumber, @roomEffectiveDate, @patientId, @visitEntryDate, @visitEntryDate)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes variables and inserts them into the Symptom table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addSymptom

	-- Add the parameters for the stored procedure here
	@patientId nvarchar(9), @entryDate datetime,
	@symptomName nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO Symptom(PatientId, EntryDate, SymptomName) VALUES (@patientId, @entryDate, @symptomName)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	removes symptom from Symptom for patient given
-- =============================================
CREATE OR ALTER PROCEDURE removeSymptom

	-- Add the parameters for the stored procedure here
	@patientId nvarchar(9)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	DELETE FROM Symptom
	WHERE PatientId = @patientId

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes variables and inserts them into the Uses table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addUses

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50), @patientId nvarchar(9),
	@entryDateTime datetime
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO Uses(StockId, PatientId, EntryDateTime) VALUES (@stockId, @patientId, @entryDateTime)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	takes variables and inserts them into the Visit table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addVisit

	-- Add the parameters for the stored procedure here
	@patientId nvarchar(9), @attendingPhysician nvarchar(50),
	@diagnosis nvarchar(50)

AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO Visit(PatientId, EntryDate, AttendingPhysician, Diagnosis) VALUES (@patientId, CURRENT_TIMESTAMP,
	@attendingPhysician, @diagnosis)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	updates visits based on parameters given
-- =============================================
CREATE OR ALTER PROCEDURE updateVisit

	-- Add the parameters for the stored procedure here
	@patientId nvarchar(9), @entryDate datetime,
	@attendingPhysician nvarchar(50), @diagnosis nvarchar(50)

AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE VISIT SET AttendingPhysician = @attendingPhysician, Diagnosis = @diagnosis WHERE PatientId = @patientId AND EntryDate = @entryDate

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	closes the staysIn by updating roomexitDate with current timestamp
-- =============================================
CREATE OR ALTER PROCEDURE closeStaysIn

	-- Add the parameters for the stored procedure here
	@visitEntryDate datetime

AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE StaysIn SET RoomExitDateTime = CURRENT_TIMESTAMP WHERE VisitEntryDate = @visitEntryDate

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/4/2019
-- Description:	closes the visit by updating exitDate with current timestamp
-- =============================================
CREATE OR ALTER PROCEDURE closeVisit

	-- Add the parameters for the stored procedure here
	@patientId nvarchar(9), @entryDate datetime

AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE VISIT SET ExitDate = CURRENT_TIMESTAMP WHERE PatientId = @patientId AND EntryDate = @entryDate

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/6/2019
-- Description:	takes variable roomNumber and returns rooms that begin with the room number given
-- =============================================
CREATE OR ALTER PROCEDURE queryRoom
	-- Add the parameters for the stored procedure here
	@roomNumber nvarchar(10)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	EXEC('SELECT * FROM Room WHERE RoomNumber LIKE ''' + @roomNumber + '%''')

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/6/2019
-- Description:	takes room and effective date variables and returns that matching Room
-- =============================================
CREATE OR ALTER PROCEDURE getRoom
	-- Add the parameters for the stored procedure here
	@effectiveDate datetime, @roomNumber nvarchar(10)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	SELECT * FROM Room WHERE EffectiveDate = @effectiveDate AND RoomNumber = @roomNumber

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/6/2019
-- Description:	takes variable and inserts them into the Service table as a new row
-- =============================================
CREATE OR ALTER PROCEDURE addService

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	INSERT INTO Service(StockId) VALUES (@stockId)

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/6/2019
-- Description:	takes variable and updates them in the Service table
-- =============================================
CREATE OR ALTER PROCEDURE updateService

	-- Add the parameters for the stored procedure here
	@stockId nvarchar(50)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	UPDATE Service SET StockId = @stockId

END
GO

-- ================================================
-- Template generated from Template Explorer using:
-- Create Procedure (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- This block of comments will not be included in
-- the definition of the procedure.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:		Matt
-- Create date: 4/6/2019
-- Description:	takes variable description and returns inventory that contain with the given description
-- =============================================
CREATE OR ALTER PROCEDURE queryInventory
	-- Add the parameters for the stored procedure here
	@description nvarchar(300)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here

	EXEC('SELECT * FROM Inventory WHERE Description LIKE ''%' + @description + '%''')

END
GO
